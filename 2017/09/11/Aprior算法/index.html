<!DOCTYPE html><html lang=""><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Aprior算法 · Mingo的博客</title><meta name="description" content="Welcome to my personal blog"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/jekyll.css"><!--[if lt IE 9]>
<script src="js/html5shiv.min.js"></script>
<script src="js/respond.min.js"></script>
<![endif]--></head><body><header class="row-flex-row limit-width vh-center"><a href="/" class="logo"><img src="/favicon.png"></a><nav><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-link">主页</a></li><li class="nav-list-item"><a href="/archives/" class="nav-link active">   博客</a></li><li class="nav-list-item"><a href="https://github.com/mingotang" target="_blank" class="nav-link">github</a></li><li class="nav-list-item"><a href="http://www.jianshu.com/users/12bf64a47246" target="_blank" class="nav-link">jianshu</a></li><li class="nav-list-item"><a href="/atom.xml" class="nav-link">rss</a></li></ul></nav></header><div class="container limit-width"><section class="row-flex-row"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2017/09/11/Aprior算法/" class="post-title-link">Aprior算法</a></h2><div class="post-meta"><ul class="post-tag-list"><li class="post-tag-item"><a href="/tags/Notes/" class="post-tag-link">Notes</a></li></ul><div class="post-time">2017年Sep11th Monday</div></div><div class="post-content"><p>关联规则挖掘在电商、零售、大气物理、生物医学已经有了广泛的应用。</p>
<p>啤酒与尿布的故事已经成为了关联规则挖掘的经典案例，还有人专门出了一本书《啤酒与尿布》，虽然说这个故事是哈弗商学院杜撰出来的，但确实能很好的解释关联规则挖掘的原理。</p>
<a id="more"></a>
<h2 id="一、关联规则、自信度、自持度的定义"><a href="#一、关联规则、自信度、自持度的定义" class="headerlink" title="一、关联规则、自信度、自持度的定义"></a>一、关联规则、自信度、自持度的定义</h2><p>关联规则就是有关联的规则，形式是这样定义的：两个不相交的非空集合X、Y，如果有X–&gt;Y，就说X–&gt;Y是一条关联规则。关联规则的强度用支持度(support)和自信度(confidence)来描述，</p>
<p>支持度的定义：support(X–&gt;Y) = |X交Y|/N = 集合X与集合Y中的项在一条记录中同时出现的次数/数据记录的个数。</p>
<p>自信度的定义：confidence(X–&gt;Y) = |X交Y|/|X| = 集合X与集合Y中的项在一条记录中同时出现的次数/集合X出现的个数 。</p>
<p>这里定义的支持度和自信度都是相对的支持度和自信度，不是绝对支持度，绝对支持度abs_support = 数据记录数N * support。</p>
<p>支持度和自信度越高，说明规则越强，关联规则挖掘就是挖掘出满足一定强度的规则。</p>
<h2 id="二、关联规则挖掘的定义与步骤"><a href="#二、关联规则挖掘的定义与步骤" class="headerlink" title="二、关联规则挖掘的定义与步骤"></a>二、关联规则挖掘的定义与步骤</h2><p>关联规则挖掘的定义：给定一个交易数据集T，找出其中所有支持度support &gt;= min_support、自信度confidence &gt;= min_confidence的关联规则。</p>
<p>有一个简单而粗鲁的方法可以找出所需要的规则，那就是穷举项集的所有组合，并测试每个组合是否满足条件，一个元素个数为n的项集的组合个数为2^n-1(除去空集)，所需要的时间复杂度明显为O(2^N)，对于普通的超市，其商品的项集数也在1万以上，用指数时间复杂度的算法不能在可接受的时间内解决问题。怎样快速挖出满足条件的关联规则是关联挖掘的需要解决的主要问题。</p>
<p>仔细想一下，我们会发现对于{啤酒–&gt;尿布}，{尿布–&gt;啤酒}这两个规则的支持度实际上只需要计算{尿布，啤酒}的支持度，即它们交集的支持度。于是我们把关联规则挖掘分两步进行：</p>
<ul>
<li><p>1）生成频繁项集: 这一阶段找出所有满足最小支持度的项集，找出的这些项集称为频繁项集。</p>
</li>
<li><p>2）生成规则: 在上一步产生的频繁项集的基础上生成满足最小自信度的规则，产生的规则称为强规则。</p>
</li>
</ul>
<p>关联规则挖掘所花费的时间主要是在生成频繁项集上，因为找出的频繁项集往往不会很多，利用频繁项集生成规则也就不会花太多的时间，而生成频繁项集需要测试很多的备选项集，如果不加优化，所需的时间是O(2^N)。</p>
<h2 id="三、Apriori定律"><a href="#三、Apriori定律" class="headerlink" title="三、Apriori定律"></a>三、Apriori定律</h2><p>为了减少频繁项集的生成时间，应该尽早的消除一些完全不可能是频繁项集的集合。</p>
<ul>
<li><p>1)：如果一个集合是频繁项集，则它的所有子集都是频繁项集。举例：假设一个集合{A,B}是频繁项集，即A、B同时出现在一条记录的次数大于等于最小支持度min_support，则它的子集{A},{B}出现次数必定大于等于min_support，即它的子集都是频繁项集。</p>
</li>
<li><p>2)：如果一个集合不是频繁项集，则它的所有超集都不是频繁项集。举例：假设集合{A}不是频繁项集，即A出现的次数小于min_support，则它的任何超集如{A,B}出现的次数必定小于min_support，因此其超集必定也不是频繁项集。</p>
</li>
</ul>
<p>利用这两条定律，我们抛掉很多的候选项集，Apriori算法就是利用这两个定理来实现快速挖掘频繁项集的。</p>
<h2 id="四、Apriori算法"><a href="#四、Apriori算法" class="headerlink" title="四、Apriori算法"></a>四、Apriori算法</h2><p>Apriori是由a priori合并而来的，它的意思是后面的是在前面的基础上推出来的，即先验推导，怎么个先验法，其实就是二级频繁项集是在一级频繁项集的基础上产生的，三级频繁项集是在二级频繁项集的基础上产生的，以此类推。</p>
<p>Apriori算法属于候选消除算法，是一个生成候选集、消除不满足条件的候选集、并不断循环直到不再产生候选集的过程。</p>
<p>关键代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line"><span class="comment">// <span class="doctag">TODO:</span> Auto-generated method stub</span></div><div class="line">record = getRecord(); <span class="comment">// 获取原始数据记录</span></div><div class="line">List&lt;List&lt;String&gt;&gt; cItemset = findFirstCandidate();  <span class="comment">// 获取第一次的备选集</span></div><div class="line">List&lt;List&lt;String&gt;&gt; lItemset = getSupportedItemset(cItemset);  <span class="comment">// 获取备选集cItemset满足支持的集合</span></div><div class="line"></div><div class="line"><span class="keyword">while</span> (endTag != <span class="literal">true</span>) &#123;  <span class="comment">// 只要能继续挖掘</span></div><div class="line">  List&lt;List&lt;String&gt;&gt; ckItemset = getNextCandidate(lItemset);  <span class="comment">// 获取第下一次的备选集</span></div><div class="line">  List&lt;List&lt;String&gt;&gt; lkItemset = getSupportedItemset(ckItemset);  <span class="comment">// 获取备选集cItemset满足支持的集合</span></div><div class="line">  getConfidencedItemset(lkItemset, lItemset, dkCountMap, dCountMap);  <span class="comment">// 获取备选集cItemset满足置信度的集合</span></div><div class="line">  <span class="keyword">if</span> (confItemset.size() != <span class="number">0</span>)  <span class="comment">// 满足置信度的集合不为空</span></div><div class="line">    printConfItemset(confItemset);  <span class="comment">// 打印满足置信度的集合</span></div><div class="line">    confItemset.clear();  <span class="comment">// 清空置信度的集合</span></div><div class="line">    cItemset = ckItemset;  <span class="comment">// 保存数据，为下次循环迭代准备</span></div><div class="line">    lItemset = lkItemset;</div><div class="line">    dCountMap.clear();</div><div class="line">    dCountMap.putAll(dkCountMap);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div></article><div class="pagination"><a href="/2017/09/12/NumPy-Arrays-Cheat-List/" class="pagination-prev">PREV</a><a href="/2017/09/11/python操作符重载/" class="pagination-next">NEXT</a></div><div class="comments"></div></div><aside class="sidebar"><h3>分类标签</h3><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COLLECTION/">COLLECTION</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Notes/">Notes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TA/">TA</a></li></ul><h3>最新文章</h3><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/10/07/Python-3-Basic/">Python 3 Basic</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/29/DBMSSAS-Assignment3/">DBMSSAS Assignment3</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/28/Python-资源包大全/">Python 资源包大全</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/26/DBMSSAS-Assignment2/">DBMSSAS Assignment2</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/26/DBMSSAS-Assignment1/">DBMSSAS Assignment1</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/25/数据库基础及SAS应用/">数据库基础及SAS应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/15/python相关技巧/">python相关技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/Pandas-Cheat-List/">Pandas Cheat List</a></li></ul></aside></section></div><div class="extra"></div><footer class="footer"><div class="row-flex-row limit-width vh-center"><div class="copyright"><P>© 2017 <a href="/">Mingo Tang</P></div><div class="power"><p><a href="http://pinggod.com/">Sean Sun</a>, 
<a href="https://hexo.io">Hexo</a>, 
<a href="https://github.com/">GitHub</a>, 
<a href="https://jekyllrb.com/">Jekyll</a></p></div></div></footer><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>