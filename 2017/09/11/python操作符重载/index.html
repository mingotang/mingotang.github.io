<!DOCTYPE html><html lang=""><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> python操作符重载 · Mingo的博客</title><meta name="description" content="Welcome to my personal blog"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/jekyll.css"><!--[if lt IE 9]>
<script src="js/html5shiv.min.js"></script>
<script src="js/respond.min.js"></script>
<![endif]--></head><body><header class="row-flex-row limit-width vh-center"><a href="/" class="logo"><img src="/favicon.png"></a><nav><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-link">Home</a></li><li class="nav-list-item"><a href="/archives/" class="nav-link active">   Blog</a></li><li class="nav-list-item"><a href="https://github.com/mingotang" target="_blank" class="nav-link">github</a></li><li class="nav-list-item"><a href="http://www.jianshu.com/users/12bf64a47246" target="_blank" class="nav-link">jianshu</a></li><li class="nav-list-item"><a href="/atom.xml" class="nav-link">rss</a></li></ul></nav></header><div class="container limit-width"><section class="row-flex-row"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2017/09/11/python操作符重载/" class="post-title-link">python操作符重载</a></h2><div class="post-meta"><ul class="post-tag-list"><li class="post-tag-item"><a href="/tags/Notes/" class="post-tag-link">Notes</a></li></ul><div class="post-time">Monday, September 11th 2017</div></div><div class="post-content"><p>转载自：<a href="http://blog.csdn.net/Rozol/article/details/70769628" target="_blank" rel="external">http://blog.csdn.net/Rozol/article/details/70769628</a></p>
<a id="more"></a>
<h2 id="构造与析构"><a href="#构造与析构" class="headerlink" title="构造与析构"></a>构造与析构</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">demo</span>:</span></div><div class="line"></div><div class="line">    <span class="comment"># 构造方法, 对象实例化时调用</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"构造方法"</span>)</div><div class="line"></div><div class="line">    <span class="comment"># 析构方法, 对象被回收时调用</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">"析构方法"</span>)</div><div class="line"></div><div class="line">    <span class="comment"># __init__之前调用, 一般用于重写父类的__new__方法</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls)</span>:</span></div><div class="line">        print(<span class="string">"new"</span>)</div><div class="line">        <span class="keyword">return</span> object.__new__(cls)</div></pre></td></tr></table></figure>
<h2 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">demo</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, num)</span>:</span></div><div class="line">        self.data = num</div><div class="line">    <span class="comment"># +</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data + other.data</div><div class="line">    <span class="comment"># -</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__sub__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data - other.data</div><div class="line">    <span class="comment"># *</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__mul__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data * other.data</div><div class="line">    <span class="comment"># /</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__truediv__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data / other.data</div><div class="line">    <span class="comment"># //</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__floordiv__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data // other.data</div><div class="line">    <span class="comment"># %</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__mod__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data % other.data</div><div class="line">    <span class="comment"># divmod()</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__divmod__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="comment"># 商(10/5),余数(10%5)</span></div><div class="line">        <span class="keyword">return</span> self.data / other.data, self.data % other.data</div><div class="line">    <span class="comment"># **</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__pow__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data ** other.data</div><div class="line">    <span class="comment"># &lt;&lt;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lshift__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data &lt;&lt; other.data</div><div class="line">    <span class="comment"># &gt;&gt;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rshift__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data &gt;&gt; other.data</div><div class="line">    <span class="comment"># &amp;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__and__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data &amp; other.data</div><div class="line">    <span class="comment"># ^</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__xor__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data ^ other.data</div><div class="line">    <span class="comment"># |</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__or__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data | other.data</div></pre></td></tr></table></figure>
<h2 id="反算术运算符-a-b-若a不支持算术运算符-则寻找b的算术运算符"><a href="#反算术运算符-a-b-若a不支持算术运算符-则寻找b的算术运算符" class="headerlink" title="反算术运算符(a+b, 若a不支持算术运算符,则寻找b的算术运算符)"></a>反算术运算符(a+b, 若a不支持算术运算符,则寻找b的算术运算符)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">demo</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, num)</span>:</span></div><div class="line">        self.data = num</div><div class="line">    <span class="comment"># +</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__radd__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data + self.data</div><div class="line">    <span class="comment"># -</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rsub__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data - self.data</div><div class="line">    <span class="comment"># *</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rmul__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data * self.data</div><div class="line">    <span class="comment"># /</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rtruediv__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data / self.data</div><div class="line">    <span class="comment"># //</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rfloordiv__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data // self.data</div><div class="line">    <span class="comment"># %</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rmod__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data % self.data</div><div class="line">    <span class="comment"># divmod()</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rdivmod__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data / self.data, other.data % self.data</div><div class="line">    <span class="comment"># **</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rpow__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data ** self.data</div><div class="line">    <span class="comment"># &lt;&lt;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rlshift__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data &lt;&lt; self.data</div><div class="line">    <span class="comment"># &gt;&gt;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rrshift__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data &gt;&gt; self.data</div><div class="line">    <span class="comment"># &amp;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rand__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data &amp; self.data</div><div class="line">    <span class="comment"># ^</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__rxor__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data ^ self.data</div><div class="line">    <span class="comment"># |</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__ror__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> other.data | self.data</div></pre></td></tr></table></figure>
<h2 id="增量赋值运算-注-位置同原始函数-在原始函数名前-i"><a href="#增量赋值运算-注-位置同原始函数-在原始函数名前-i" class="headerlink" title="增量赋值运算 (注:位置同原始函数,在原始函数名前+i)"></a>增量赋值运算 (注:位置同原始函数,在原始函数名前+i)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">demo</span><span class="params">()</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, num)</span>:</span></div><div class="line">        self.data = num</div><div class="line">    <span class="comment"># +=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iadd__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data + other</div><div class="line">    <span class="comment"># -=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__isub__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data - other</div><div class="line">    <span class="comment"># *=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__imul__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data * other</div><div class="line">    <span class="comment"># /=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__itruediv__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data / other</div><div class="line">    <span class="comment"># //=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__ifloordiv__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data // other</div><div class="line">    <span class="comment"># %=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__imod__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data % other</div><div class="line">    <span class="comment"># **=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__ipow__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data ** other</div><div class="line">    <span class="comment"># &lt;&lt;=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__ilshift__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data &lt;&lt; other</div><div class="line">    <span class="comment"># &gt;&gt;=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__irshift__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data &gt;&gt; other</div><div class="line">    <span class="comment"># &amp;=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iand__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data &amp; other</div><div class="line">    <span class="comment"># ^=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__ixor__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data ^ other</div><div class="line">    <span class="comment"># |=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__ior__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data | other</div></pre></td></tr></table></figure>
<h2 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">demo</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, num)</span>:</span></div><div class="line">        self.data = num</div><div class="line">    <span class="comment"># &lt;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data &lt; other.data</div><div class="line">    <span class="comment"># &lt;=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__le__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data &lt;= other.data</div><div class="line">    <span class="comment"># ==</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data == other.data</div><div class="line">    <span class="comment"># !=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__ne__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data != other.data</div><div class="line">    <span class="comment"># &gt;</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__gt__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data &gt; other.data</div><div class="line">    <span class="comment"># &gt;=</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__ge__</span><span class="params">(self, other)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.data &gt;= other.data</div></pre></td></tr></table></figure>
<h2 id="一元操作符"><a href="#一元操作符" class="headerlink" title="一元操作符"></a>一元操作符</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">demo</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, num)</span>:</span></div><div class="line">        self.data = num</div><div class="line">    <span class="comment"># + 正号</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__pos__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> +abs(self.data)</div><div class="line">    <span class="comment"># - 负号</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__neg__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> -abs(self.data)</div><div class="line">    <span class="comment"># abs() 绝对值</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__abs__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> abs(self.data)</div><div class="line">    <span class="comment"># ~ 按位取反</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__invert__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> ~self.data</div><div class="line">    <span class="comment"># complex() 字符转数字</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__complex__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>+<span class="number">2j</span></div><div class="line">    <span class="comment"># int() 转为整数</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__int__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="number">123</span></div><div class="line">    <span class="comment"># float() 转为浮点数</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__float__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="number">1.23</span></div><div class="line">    <span class="comment"># round()  近似值</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__round__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="number">1.123</span></div></pre></td></tr></table></figure>
<h2 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">demo</span>:</span></div><div class="line">    <span class="comment"># print() 打印</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"This is the demo."</span></div><div class="line">    <span class="comment"># repr() 对象字符串表示</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"This is a demo."</span></div><div class="line">    <span class="comment"># bytes() 对象字节字符串表现形式</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__bytes__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">b"This is one demo."</span></div><div class="line">    <span class="comment"># format() 格式化</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__format__</span><span class="params">(self, format_spec)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.__str__()</div></pre></td></tr></table></figure>
<h2 id="属性访问"><a href="#属性访问" class="headerlink" title="属性访问"></a>属性访问</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">demo</span>:</span></div><div class="line">    <span class="comment"># 获取(不存在)属性</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">print</span> (<span class="string">"访问的属性不存在"</span>)</div><div class="line">    <span class="comment"># getattr() hasattr() 获取属性</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattribute__</span><span class="params">(self, attr)</span>:</span></div><div class="line">        <span class="keyword">print</span> (<span class="string">"访问的属性是%s"</span>%attr)</div><div class="line">        <span class="keyword">return</span> attr</div><div class="line">    <span class="comment"># setattr() 设置属性</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setattr__</span><span class="params">(self, attr, value)</span>:</span></div><div class="line">        <span class="keyword">print</span> (<span class="string">"设置 %s 属性值为 %s"</span>%(attr, value))</div><div class="line">    <span class="comment"># delattr() 删除属性</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delattr__</span><span class="params">(self, attr)</span>:</span></div><div class="line">        <span class="keyword">print</span> (<span class="string">"删除 %s 属性"</span>%attr)</div></pre></td></tr></table></figure>
<h2 id="描述器-类-test1-的实例出现在属主类-runtest-中-这些方法才会调用-注-函数调用-这些方法不会被调用"><a href="#描述器-类-test1-的实例出现在属主类-runtest-中-这些方法才会调用-注-函数调用-这些方法不会被调用" class="headerlink" title="描述器(类(test1)的实例出现在属主类(runtest)中,这些方法才会调用)(注:函数调用,这些方法不会被调用)"></a>描述器(类(test1)的实例出现在属主类(runtest)中,这些方法才会调用)(注:函数调用,这些方法不会被调用)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">test1</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, value = <span class="number">1</span>)</span>:</span></div><div class="line">        self.value = value * <span class="number">2</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__set__</span><span class="params">(self, instance, value)</span>:</span></div><div class="line">        print(<span class="string">"set %s %s %s"</span>%(self, instance, value))</div><div class="line">        self.value = value * <span class="number">2</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__get__</span><span class="params">(self, instance, owner)</span>:</span></div><div class="line">        print(<span class="string">"get %s %s %s"</span>%(self, instance, owner))</div><div class="line">        <span class="keyword">return</span> self.value</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delete__</span><span class="params">(self, instance)</span>:</span></div><div class="line">        print(<span class="string">"delete %s %s"</span>%(self, instance))</div><div class="line">        <span class="keyword">del</span> self.value</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">test2</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, value = <span class="number">1</span>)</span>:</span></div><div class="line">        self.value = value + <span class="number">0.3</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__set__</span><span class="params">(self, instance, value)</span>:</span></div><div class="line">        print(<span class="string">"set %s %s %s"</span>%(self, instance, value))</div><div class="line">        instance.t1 = value + <span class="number">0.3</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__get__</span><span class="params">(self, instance, owner)</span>:</span></div><div class="line">        print(<span class="string">"get %s %s %s"</span>%(self, instance, owner))</div><div class="line">        <span class="keyword">return</span> instance.t1</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delete__</span><span class="params">(self, instance)</span>:</span></div><div class="line">        print(<span class="string">"delete %s %s"</span>%(self, instance))</div><div class="line">        <span class="keyword">del</span> self.value</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">runtest</span>:</span></div><div class="line">    t1 = test1()</div><div class="line">    t2 = test2()</div><div class="line"></div><div class="line"><span class="comment"># ---</span></div><div class="line"></div><div class="line"><span class="comment"># 自定义property</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">property_my</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, fget=None, fset=None, fdel=None)</span>:</span></div><div class="line">        self.fget = fget</div><div class="line">        self.fset = fset</div><div class="line">        self.fdel = fdel</div><div class="line">    <span class="comment"># 对象被获取(self自身, instance调用该对象的对象(demo9), owner调用该对象的对象类对象(demo9))</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__get__</span><span class="params">(self, instance, owner)</span>:</span></div><div class="line">        print(<span class="string">"get %s %s %s"</span>%(self, instance, owner))</div><div class="line">        <span class="keyword">return</span> self.fget(instance)</div><div class="line">    <span class="comment"># 对象被设置属性时</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__set__</span><span class="params">(self, instance, value)</span>:</span></div><div class="line">        print(<span class="string">"set %s %s %s"</span>%(self, instance, value))</div><div class="line">        self.fset(instance, value)</div><div class="line">    <span class="comment"># 对象被删除时</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delete__</span><span class="params">(self, instance)</span>:</span></div><div class="line">        print(<span class="string">"delete %s %s"</span>%(self, instance))</div><div class="line">        self.fdel(instance)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">demo10</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.num = <span class="keyword">None</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setvalue</span><span class="params">(self, value)</span>:</span></div><div class="line">        self.num = value</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getvalue</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.num</div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">del</span> self.num</div><div class="line">    x = property_my(getvalue, setvalue, delete)</div></pre></td></tr></table></figure>
<h2 id="自定义容器"><a href="#自定义容器" class="headerlink" title="自定义容器"></a>自定义容器</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">lis</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, *args)</span>:</span></div><div class="line">        self.lists = args</div><div class="line">        self.size = len(args)</div><div class="line">        self.startindex = <span class="number">0</span></div><div class="line">        self.endindex = self.size</div><div class="line">    <span class="comment"># len() 容器元素数量</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.size;</div><div class="line">    <span class="comment"># lis[1] 获取元素</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, key = <span class="number">0</span>)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.lists[key]</div><div class="line">    <span class="comment"># lis[1] = value 设置元素</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line">    <span class="comment"># del lis[1] 删除元素</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self, key)</span>:</span></div><div class="line">        <span class="keyword">pass</span></div><div class="line">    <span class="comment"># 返回迭代器</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self</div><div class="line">    <span class="comment"># rversed() 反向迭代器</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__reversed__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">while</span> self.endindex &gt; <span class="number">0</span>:</div><div class="line">            self.endindex -= <span class="number">1</span></div><div class="line">            <span class="keyword">yield</span> self[self.endindex]</div><div class="line">    <span class="comment"># next() 迭代器下个元素</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">if</span> self.startindex &gt;= self.size:</div><div class="line">            <span class="keyword">raise</span> StopIteration <span class="comment"># 控制迭代器结束</span></div><div class="line"></div><div class="line">        elem = self.lists[self.startindex]</div><div class="line">        self.startindex += <span class="number">1</span></div><div class="line">        <span class="keyword">return</span> elem</div><div class="line"></div><div class="line">    <span class="comment"># in / not in</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__contains__</span><span class="params">(self, item)</span>:</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> self.lists:</div><div class="line">            <span class="keyword">if</span> i == item:</div><div class="line">                <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">False</span></div></pre></td></tr></table></figure>
<h2 id="yield"><a href="#yield" class="headerlink" title="yield"></a>yield</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># yield 生成器(执行一次返回,下次继续执行后续代码返回)</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">yielddemo</span><span class="params">()</span>:</span></div><div class="line">    num = <span class="number">0</span></div><div class="line">    <span class="keyword">while</span> <span class="number">1</span>: <span class="comment"># 1 == True; 0 == False</span></div><div class="line">        <span class="keyword">if</span> num &gt;= <span class="number">10</span>:</div><div class="line">            <span class="keyword">raise</span> StopIteration</div><div class="line">        num += <span class="number">1</span></div><div class="line">        <span class="keyword">yield</span> num</div><div class="line"></div><div class="line"><span class="comment"># 能接收数据的生成器</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">yielddemo_1</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">while</span> <span class="number">1</span>:</div><div class="line">        num = <span class="keyword">yield</span></div><div class="line">        print(num)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># with 自动上下文管理</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">withdemo</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, value)</span>:</span></div><div class="line">        self.value = value</div><div class="line">    <span class="comment"># 返回值为 as 之后的值</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.value</div><div class="line">    <span class="comment"># 执行完成,退出时的数据清理动作</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_value, traceback)</span>:</span></div><div class="line">        <span class="keyword">del</span> self.value</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># yield 生成器(可迭代对象Iterable)</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> yielddemo():</div><div class="line">    print(i)</div><div class="line"><span class="comment"># ---</span></div><div class="line">iters = iter(yielddemo())</div><div class="line">print(next(iters))</div><div class="line">print(next(iters))</div><div class="line"></div><div class="line"><span class="comment"># --- 发送数据给生成器 ---</span></div><div class="line">iters = yielddemo_1()</div><div class="line">next(iters)</div><div class="line">iters.send(<span class="number">6</span>) <span class="comment"># 发送数据并执行</span></div><div class="line">iters.send(<span class="number">10</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># with 自动上下文管理</span></div><div class="line"><span class="keyword">with</span> withdemo(<span class="string">"Less is more!"</span>) <span class="keyword">as</span> s:</div><div class="line">    print(s)</div></pre></td></tr></table></figure>
</div></article><div class="pagination"><a href="/2017/09/11/Aprior算法/" class="pagination-prev">PREV</a><a href="/2017/09/09/不要让鱼去学爬树/" class="pagination-next">NEXT</a></div><div class="comments"></div></div><aside class="sidebar"><h3>分类标签</h3><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COLLECTION/">COLLECTION</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Notes/">Notes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TA/">TA</a></li></ul><h3>最新文章</h3><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/10/07/Python-3-Basic/">Python 3 Basic</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/29/DBMSSAS-Assignment3/">DBMSSAS Assignment3</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/28/Python-资源包大全/">Python 资源包大全</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/26/DBMSSAS-Assignment2/">DBMSSAS Assignment2</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/26/DBMSSAS-Assignment1/">DBMSSAS Assignment1</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/25/数据库基础及SAS应用/">数据库基础及SAS应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/15/python相关技巧/">python相关技巧</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/Pandas-Cheat-List/">Pandas Cheat List</a></li></ul></aside></section></div><div class="extra"></div><footer class="footer"><div class="row-flex-row limit-width vh-center"><div class="copyright"><P>© 2017 <a href="/">Mingo Tang</P></div><div class="power"><p><a href="http://pinggod.com/">Sean Sun</a>, 
<a href="https://hexo.io">Hexo</a>, 
<a href="https://github.com/">GitHub</a>, 
<a href="https://jekyllrb.com/">Jekyll</a></p></div></div></footer><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>