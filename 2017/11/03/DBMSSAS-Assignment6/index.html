<!DOCTYPE html><html lang=""><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> DBMSSAS Assignment6 · Mingo的博客</title><meta name="description" content="Welcome to my personal blog"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/jekyll.css"><!--[if lt IE 9]>
<script src="js/html5shiv.min.js"></script>
<script src="js/respond.min.js"></script>
<![endif]--></head><body><header class="row-flex-row limit-width vh-center"><a href="/" class="logo"><img src="/favicon.png"></a><nav><ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-link">Home</a></li><li class="nav-list-item"><a href="/archives/" class="nav-link active">   Blog</a></li><li class="nav-list-item"><a href="https://github.com/mingotang" target="_blank" class="nav-link">github</a></li><li class="nav-list-item"><a href="http://www.jianshu.com/users/12bf64a47246" target="_blank" class="nav-link">jianshu</a></li><li class="nav-list-item"><a href="/atom.xml" class="nav-link">rss</a></li></ul></nav></header><div class="container limit-width"><section class="row-flex-row"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/2017/11/03/DBMSSAS-Assignment6/" class="post-title-link">DBMSSAS Assignment6</a></h2><div class="post-meta"><ul class="post-tag-list"><li class="post-tag-item"><a href="/tags/TA/" class="post-tag-link">TA</a></li></ul><div class="post-time">Friday, November 3rd 2017</div></div><div class="post-content"><a id="more"></a>
<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Write SQL sentences</p>
<ol>
<li>Create and alter table.<br>(1) Create a Teacher table with the attributes: TNo char(10), TName nchar(10), TSex nchar(2), TAge int, TAddr nchar(50), define the Tno as Primary key.<br>(2) Alter Teacher table, drop the Tage attribute<br>(3) Alter Teacher table, change the data type of TAddr to varchar(50).</li>
<li>Create view.<br>Create a view MStudent(sno, avgGrade) includes the students whose average grades are in [80-90).</li>
<li>Insert values.<ul>
<li>杨功利 selected course 4,8,9 and got the grades 88,85,90;</li>
<li>李明 selected course 3,8,9 and got the grades 92,93,89;</li>
</ul>
</li>
<li>Query<br>(1) Query the sno and sname of students who selected all courses;<br>(2) Query the course name and its prerequisite‘s prerequisite course number.<br>(3) Query the SNo, SNmae, SSex, avgGrade of Students using view MStudent and other tables.</li>
</ol>
<hr>
<h2 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h2><h4 id="Create-and-alter-table"><a href="#Create-and-alter-table" class="headerlink" title="Create and alter table."></a><strong>Create and alter table.</strong></h4><p>(1) Create a Teacher table with the attributes: TNo char(10), TName nchar(10), TSex nchar(2), TAge int, TAddr nchar(50), define the Tno as Primary key.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Teacher(</div><div class="line">  TNo <span class="built_in">char</span>(<span class="number">10</span>) primary <span class="keyword">key</span>,</div><div class="line">  TName <span class="keyword">nchar</span>(<span class="number">10</span>),</div><div class="line">  TSex <span class="keyword">nchar</span>(<span class="number">2</span>),</div><div class="line">  TAge <span class="built_in">int</span>,</div><div class="line">  TAddr <span class="keyword">nchar</span>(<span class="number">50</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>(2) Alter Teacher table, drop the Tage attribute.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Alter</span> <span class="keyword">Table</span> Teacher <span class="keyword">drop</span> <span class="keyword">column</span> Tage;</div></pre></td></tr></table></figure>
<p>(3) Alter Teacher table, change the data type of TAddr to varchar(50).</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">Alter</span> <span class="keyword">table</span> Teacher <span class="keyword">Alter</span> <span class="keyword">column</span> TAddr <span class="built_in">varchar</span>(<span class="number">50</span>);</div></pre></td></tr></table></figure>
<h4 id="Create-view"><a href="#Create-view" class="headerlink" title="Create view."></a><strong>Create view.</strong></h4><p>Create a view MStudent(sno, avgGrade) includes the students whose average grades are in [80-90).</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> MStudent <span class="keyword">AS</span></div><div class="line">  <span class="keyword">SELECT</span> Sno, <span class="keyword">AVG</span>(Grade) <span class="keyword">AS</span> avgGrade</div><div class="line">    <span class="keyword">FROM</span> SC</div><div class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno</div><div class="line">    <span class="keyword">Having</span> <span class="keyword">AVG</span>(Grade)&gt;=<span class="number">80</span> <span class="keyword">and</span> <span class="keyword">AVG</span>(Grade)&lt;<span class="number">90</span>;</div></pre></td></tr></table></figure>
<h4 id="Insert-values"><a href="#Insert-values" class="headerlink" title="Insert values."></a><strong>Insert values.</strong></h4><p>(1) 杨功利 selected course 4,8,9 and got the grades 88,85,90;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SC</div><div class="line">  <span class="keyword">VALUES</span>(<span class="string">'12003'</span>, <span class="string">'4'</span>, <span class="number">88</span>),</div><div class="line">        (<span class="string">'12003'</span>, <span class="string">'8'</span>, <span class="number">85</span>),</div><div class="line">        (<span class="string">'12003'</span>, <span class="string">'9'</span>, <span class="number">90</span>);</div></pre></td></tr></table></figure>
<p>(2) 李明 selected course 3,8,9 and got the grades 92,93,89;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SC</div><div class="line">  <span class="keyword">VALUES</span>(<span class="string">'12008'</span>, <span class="string">'3'</span>, <span class="number">92</span>),</div><div class="line">  	    (<span class="string">'12008'</span>, <span class="string">'8'</span>, <span class="number">93</span>),</div><div class="line">        (<span class="string">'12008'</span>, <span class="string">'9'</span>, <span class="number">89</span>);</div></pre></td></tr></table></figure>
<h4 id="Query"><a href="#Query" class="headerlink" title="Query"></a><strong>Query</strong></h4><p>(1) Query the sno and sname of students who selected all courses;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> sno, sname</div><div class="line">  <span class="keyword">FROM</span> Student</div><div class="line">  <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></div><div class="line">    (<span class="keyword">SELECT</span> *</div><div class="line">      <span class="keyword">FROM</span> Course</div><div class="line">      <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></div><div class="line">        (<span class="keyword">SELECT</span> *</div><div class="line">          <span class="keyword">FROM</span> SC</div><div class="line">          <span class="keyword">WHERE</span> Sno=Student.Sno <span class="keyword">AND</span> Cno=Course.Cno));</div></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> Sno, Sname</div><div class="line">  <span class="keyword">FROM</span> Student</div><div class="line">  <span class="keyword">WHERE</span> Sno <span class="keyword">in</span></div><div class="line">  	(<span class="keyword">SELECT</span> Sno <span class="keyword">FROM</span> SC</div><div class="line">  	 <span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno</div><div class="line">  	 <span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(Cno)=(<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(Cno) <span class="keyword">FROM</span> Course));</div></pre></td></tr></table></figure>
<p>(2) Query the course name and its prerequisite‘s prerequisite course number.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> C1.Cname, C2.Cpno <span class="keyword">as</span> Cppno</div><div class="line">  <span class="keyword">FROM</span> Course C1, Course C2</div><div class="line">  <span class="keyword">WHERE</span> C1.cpno=C2.cno <span class="keyword">and</span> C2.cpno <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</div></pre></td></tr></table></figure>
<p>(3) Query the SNo, SNmae, SSex, avgGrade of Students using view MStudent and other tables.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> Student.sno, Sname, Ssex, avgGrade</div><div class="line">  <span class="keyword">FROM</span> Student, MStudent</div><div class="line">  <span class="keyword">WHERE</span> Student.sno=MStudent.sno;</div></pre></td></tr></table></figure>
<hr>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><ul>
<li>第三问插入值中需要注意SC的结构是sno, cno, grade而不是sname, cno, grade</li>
</ul>
</div></article><div class="pagination"><span class="pagination-prev">PREV</span><a href="/2017/10/21/DBMSSAS-Assignment5/" class="pagination-next">NEXT</a></div><div class="comments"></div></div><aside class="sidebar"><h3>分类标签</h3><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/COLLECTION/">COLLECTION</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Notes/">Notes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TA/">TA</a></li></ul><h3>最新文章</h3><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/11/03/DBMSSAS-Assignment6/">DBMSSAS Assignment6</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/21/DBMSSAS-Assignment5/">DBMSSAS Assignment5</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/13/DBMSSAS-Assignment4/">DBMSSAS Assignment4</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/10/Sharing/">Sharing</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/29/DBMSSAS-Assignment3/">DBMSSAS Assignment3</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/28/Python-资源包大全/">Python 资源包大全</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/26/DBMSSAS-Assignment2/">DBMSSAS Assignment2</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/26/DBMSSAS-Assignment1/">DBMSSAS Assignment1</a></li></ul></aside></section></div><div class="extra"></div><footer class="footer"><div class="row-flex-row limit-width vh-center"><div class="copyright"><P>© 2017 <a href="/">Mingo Tang</P></div><div class="power"><p><a href="http://pinggod.com/">Sean Sun</a>, 
<a href="https://hexo.io">Hexo</a>, 
<a href="https://github.com/">GitHub</a>, 
<a href="https://jekyllrb.com/">Jekyll</a></p></div></div></footer><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>